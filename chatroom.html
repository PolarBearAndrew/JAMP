<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>chat room</title>

	<style>
		body {
			margin: 0px;
		}
		
		#main {
			width: calc(100% - 300px);
			height: 600px;
			background-color: #a32b2b;
		}
		
		div#say {
			position: fixed;
			top: calc(100% - 100px);
			width: calc(100% - 300px);
			height: 100px;
			background-color: #206d29;
		}
		
		div#say>* {
			float: left;
		}
		
		input.say {
			margin-top: 20px;
			margin-left: 5%;
			width: 80%;
			height: 60px;
			font-size: 32px;
		}
		
		div#send {
			margin-top: 24px;
			height: 44px;
			width: 10%;
			margin-left: 1%;
			background-color: #0039f8;
			font-size: 34px;
			text-align: center;
			font-weight: bolder;
			color: white;
			padding-top: 16px;
			border-radius: 8px;
			cursor: pointer;
		}
	</style>

	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>

	<script>
		var myId = "andrew";
		var myTeam = "JAMP";
		var to = "doro";

		var socket = io();

		$(document).ready(function () {
			$('div#send').click(function () { //click 傳送

				var data = new Object(); ///建立物件
				data.from = myId;
				data.to = to; //傳送目標
				data.say = $('input.say').val(); //input的訊息
				data.roomId = "";

				socket.emit('msg', data); //傳送給server
				return false;
			});
		});

		socket.on('say', function (data) {
			alert(data.to.indexOf(myId));
			if ((data.to.indexOf(myId) != -1) || (data.to == 'all')) {
				$('#main').append(data.from + "&nbsp;[JAMP]" + "&nbsp;:&nbsp;" + data.say + "<br/>");
			}

		});
	</script>

</head>

<body>
	<div id="main">

	</div>
	<div id="say">
		<input type="text" class="say">
		<div id="send">Send</div>
	</div>
</body>

</html>